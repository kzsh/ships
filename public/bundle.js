!function(){"use strict";const{abs:t,max:a,min:e,random:s}=Math;let d=2;const r={id:1,data:{},update:(t,a,e,s)=>{if(!a)return;for(const t of e){if(!t)break;if(a.id!==t.id){const[s,d,r]=o(a,t);h(a,t,r,e),a.data.dist=r,a.data.h=d,a.data.w=s}}const d=s.ArrowDown?.1:s.ArrowUp?-.1:0,r=s.ArrowLeft?-.1:s.ArrowRight?.1:0;a.dx=a.dx+r,a.dy=a.dy+d,a.x=a.x+a.dx,a.y=a.y+a.dy},mass:50,radius:10,x:300,y:300,dx:2,dy:1},n=(a,e,s=1,r=10,n=2*Math.random()-1,i=2*Math.random()-1)=>({id:d++,data:{},update:(a,e,s,d)=>{if(e)if(t(e.x)>2e3||t(e.y)>2e3)c(s,e);else if(e.radius<=1&&e.mass<=.1)c(s,e);else{for(const t of s){if(!t)break;if(e.id!==t.id){const[,,a]=o(e,t);h(e,t,a,s)}}e.x=e.x+e.dx,e.y=e.y+e.dy}},mass:s,radius:r,x:a,y:e,dx:n,dy:i}),o=(t,a)=>{const e=a.x-t.x,s=a.y-t.y,d=m(t,a),r=i(t.mass,a.mass,d),{x:n,y:o}=y(t,a,r);return t.dx+=n,t.dy+=o,[e,s,d]},i=(t,a,e)=>t*a/e**2*1/t,m=(t,a)=>{const e=Math.abs(a.x-t.x),s=Math.abs(a.y-t.y);return Math.sqrt(e**2+s**2)},y=(t,a,e)=>{const s=Math.atan2(a.x-t.x,a.y-t.y);return{x:Math.sin(s)*e,y:Math.cos(s)*e}},h=(t,a,e,d)=>{if(e-t.radius-a.radius<=0){const e=m(t,a),r=i(t.mass,a.mass,e),o=i(a.mass,t.mass,e),{x:h,y:c}=y(t,a,-1*r),{x:M,y:l}=y(t,a,o);t.dx+=h,t.dy+=c,a.dx+=M,a.dy+=l;const f=.1,w=.1;t.mass>a.mass&&a.mass>.01&&a.radius>0?(u(a,t,"mass",f),u(a,t,"radius",w),x(.2,(()=>{a.mass-=.5,a.radius-=.1,d.push(n(a.x+2.5*a.radius*s()-a.radius,a.y+2.5*a.radius*s()-a.radius,.01*a.mass,.01*a.radius,-4*h,-4*c))}))):t.mass<a.mass&&t.mass>.01&&t.radius>.01&&(u(t,a,"mass",f),u(t,a,"radius",w),x(.9,(()=>{t.mass-=.5,t.radius-=.1,d.push(n(t.x+2.5*t.radius*s()-t.radius,t.y+2.5*t.radius*s()-t.radius,.01*t.mass,.01*t.radius,-4*M,-4*l))})))}},u=(t,a,e,s)=>{t[e]-=s,a[e]+=s},x=(t,a)=>{s()<t&&a()},c=(t,a)=>{t[t.indexOf(a)]=void 0},M=()=>{const t={entities:[r,n(500,500,1e3,50),n(1e3*Math.random()+10,1e3*Math.random()+10,30*Math.random(),20*Math.random()),n(1e3*Math.random()+10,1e3*Math.random()+10,30*Math.random(),20*Math.random()),n(1e3*Math.random()+10,1e3*Math.random()+10,30*Math.random(),20*Math.random()),n(1e3*Math.random()+10,1e3*Math.random()+10,30*Math.random(),20*Math.random()),n(1e3*Math.random()+10,1e3*Math.random()+10,30*Math.random(),20*Math.random()),n(1e3*Math.random()+10,1e3*Math.random()+10,30*Math.random(),20*Math.random()),n(1e3*Math.random()+10,1e3*Math.random()+10,30*Math.random(),20*Math.random())],player:r};return[t,(a,e)=>(t.entities=t.entities.filter(Boolean),t.entities.forEach((s=>s?.update(a,s,t.entities,e))),t)]},l=({entities:t},a)=>{const e=t.length;a.strokeStyle,k(a,e,{x:28,y:28});for(let s=0;s<e;s++){const e=t[s];if(!e)break;f(a,e),w(a,e,{x:e.x+5*e.dx,y:e.y+5*e.dy},{color:"#F00"}),r&&e.id,k(a,e.dx?.toFixed(2),{x:e.x+14,y:e.y+14}),k(a,e.dy?.toFixed(2),{x:e.x+14,y:e.y+28})}},f=(t,a)=>{if(a.radius<=0)return;const e=t.strokeStyle;t.beginPath(),t.strokeStyle="#FFF",t.arc(a.x,a.y,a.radius,0,360),t.stroke(),t.strokeStyle=e},w=(t,a,e,{color:s}={color:"#FFF"})=>{const d=t.strokeStyle;t.beginPath(),t.moveTo(a.x,a.y),t.strokeStyle=s,t.lineTo(e.x,e.y),t.stroke(),t.strokeStyle=d},k=(t,a,{x:e,y:s})=>{void 0!==a&&null!=a&&(t.beginPath(),t.font="14px serif",t.strokeStyle="#FFF",t.fillStyle="#FFF",t.fillText(a,e,s))},F=50;!function(){const t={},a=document.createElement("canvas");a.width=window.innerWidth,a.height=window.innerHeight;const e=a.getContext("2d");document.body.appendChild(a);const[s,d]=M();let r=0,n=0;const o=(i=0)=>{const m=i-r;n+=m,n>F&&(d(m,t),e.clearRect(0,0,a.width,a.height),l(s,e),n=0),r=i,window.requestAnimationFrame(o)},i=["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"];document.addEventListener("keydown",(a=>{i.includes(a.key)&&(a.preventDefault(),t[a.key]=!0)})),document.addEventListener("keyup",(a=>{i.includes(a.key)&&(a.preventDefault(),t[a.key]=!1)})),o()}()}();
//# sourceMappingURL=bundle.js.map
